<?xml version="1.0"?>
<configuration>
  <configSections>
    <section name="marc.hi.ehrs.svc.core" type="MARC.HI.EHRS.SVC.Core.HostConfigurationSectionHandler, MARC.HI.EHRS.SVC.Core, Version=1.0.0.0"/>
    <section name="marc.hi.ehrs.cr.persistence.data" type="MARC.HI.EHRS.CR.Persistence.Data.Configuration.ConfigurationSectionHandler, MARC.HI.EHRS.CR.Persistence.Data, Version=1.0.0.0"/>
    <section name="marc.hi.ehrs.cr.notification.pixpdq" type="MARC.HI.EHRS.CR.Notification.PixPdq.Configuration.ConfigurationSectionHandler, MARC.HI.EHRS.CR.Notification.PixPdq, Version=1.0.0.0, Culture=neutral"/>
    <section name="marc.everest.connectors.wcf" type="MARC.Everest.Connectors.WCF.Configuration.ConfigurationSection, MARC.Everest.Connectors.WCF, Version=1.1.0.0"/>

  </configSections>
  <connectionStrings configSource="db.config"/>
  <system.data>
    <DbProviderFactories>
      <clear/>
      <add name="PostgreSQL Data Provider" invariant="Npgsql" description=".Net Framework Data Provider for PostgreSQL" type="Npgsql.NpgsqlFactory, Npgsql, Version=2.0.11.91, Culture=neutral, PublicKeyToken=5d8b90d52f46fda7"/>
      <!-- other provider entries elided -->
    </DbProviderFactories>
  </system.data>
  <system.net>
    <defaultProxy enabled="true">
      <proxy proxyaddress="http://127.0.0.1:8888"/>
    </defaultProxy>
  </system.net>
  <system.serviceModel>
    <client>
      <endpoint name="marc_xds" address="http://xds.marc-hi.ca:1025/XDSService/XDSRegistry" contract="MARC.Everest.Connectors.WCF.Core.IConnectorContract" binding="wsHttpBinding" bindingConfiguration="ihe_Binding"/>
    </client>
    <bindings>
      <wsHttpBinding>
        <binding name="ihe_Binding" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="WeakWildcard" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647" messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true" allowCookies="false">
          <readerQuotas maxDepth="32" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="4096" maxNameTableCharCount="2147483647"/>
          <reliableSession ordered="true" inactivityTimeout="00:10:00" enabled="false"/>
          <security mode="None">
            <transport clientCredentialType="Certificate" proxyCredentialType="None" realm=""/>
            <message clientCredentialType="Windows" negotiateServiceCredential="true" establishSecurityContext="true"/>
          </security>
        </binding>
      </wsHttpBinding>
    </bindings>
  </system.serviceModel>
  <marc.hi.ehrs.svc.core>
    <system>
      <device id="1.3.6.1.4.1.33349.3.1.1.2" name="CR"/>
    </system>
    <!-- Custodial information for records -->
    <custodianship>
      <name>MARC-HI Client Registry</name>
      <!-- Identifies the domain under which identifiers are reported from this registry -->
      <id domain="1.3.6.1.4.1.33349.3.1.2.2.0" value="CR1"/>
    </custodianship>
    <!-- Realm that the persistence engine is running within -->
    <jurisdiction>
      <name>MARC-HI</name>
      <id domain="1.3.6.1.4.1.33349.3.1" value="HI"/>
      <!-- The next three lines identify the realm (roots) that should be
      returned in messages when communicating with external entities-->
      <clientExport domain="1.3.6.1.4.1.33349.3.1.2.1.0"/>
      <providerExport domain="1.3.6.1.4.1.33349.3.1.2.1.1"/>
      <sdlExport domain="1.3.6.1.4.1.33349.3.1.2.1.2"/>
      <defaultLanguageCode code="en"/>
    </jurisdiction>
    <registeredDevices validateSolicitors="false"/>
    <registeredOids>
      <add name="ICD10" ref="http://hl7.org/fhir/sid/icd-10" oid="2.16.840.1.113883.6.3" desc="International Classification of Diseases version 10">
        <attribute name="HL70396Name" value="I10"/>
      </add>
      <add name="ICD10CA" oid="2.16.840.1.113883.11.19436" desc="ICD10 Canadian Codes"/>
      <add name="ICD10CM" oid="2.16.840.1.113883.6.90" desc="International Classification of Diseases version 10 Clinical Modification">
        <attribute name="HL70396Name" value="I10C"/>
      </add>
      <add name="ICD9" ref="http://hl7.org/fhir/sid/icd-9" oid="2.16.840.1.113883.6.2" desc="Internaional Classification of Diseases version 9">
        <attribute name="HL70396Name" value="I9"/>
      </add>
      <add name="ISO639" oid="2.16.840.1.113883.6.99" desc="Used internally to identify a locale">
        <attribute name="HL70396Name" value="ISO639"/>
      </add>
      <add name="ISO639-1" ref="http://hl7.org/fhir/sid/iso-639-1" oid="2.16.840.1.113883.6.99" desc="ISO Codes for Country portion of locale">
        <attribute name="HL70396Name" value="ISO639-1"/>
      </add>
      <add name="ISO639-2" oid="2.16.840.1.113883.6.100" desc="ISO Codes for Language portion of locale">
        <attribute name="HL70396Name" value="ISO639-2"/>
      </add>
      <add name="ISO639-3" ref="http://hl7.org/fhir/sid/iso-639-3" oid="2.16.840.1.113883.6.121" desc="ISO Codes for Language portion of locale">
        <attribute name="HL70396Name" value="ISO639-3"/>
      </add>
      <add name="ISO3166-1" oid="1.0.3166.1">
        <attribute name="HL70396Name" value="ISO3166-1"/>
      </add>
      <add name="ISO3166-2" oid="1.0.3166.2">
        <attribute name="HL70396Name" value="ISO3166-2"/>
      </add>
      <add name="LOINC" ref="http://hl7.org/fhir/sid/loinc" oid="2.16.840.1.113883.6.1" desc="Logical Observation Identifiers Names and Codes">
        <attribute name="HL70396Name" value="LN"/>
      </add>
      <add name="MARC_ECID" oid="1.3.6.1.4.1.33349.3.1.2.1.0" desc="Enterprise Client Identifier for MARC-HI EHRSv3">
        <attribute name="AssigningAuthorityName" value="MOH_CAAT_ENT"/>
        <attribute name="OIDType" value="ISO"/>
        <attribute name="AssigningDevFacility" value="MARC-W3-1|Mohawk College"/>
        <attribute name="AssigningDevFacility" value="MARC-W3-2|Mohawk College"/>
      </add>
      <add name="SSN" oid="2.16.840.1.113883.4.1" desc="United States of America Social Security Number">
        <attribute name="AssigningAuthorityName" value="SSN"/>
        <attribute name="OIDType" value="ISO"/>
      </add>
      <add name="MARC_EPID" oid="1.3.6.1.4.1.33349.3.1.2.1.1" desc="Enterprise Provider Identifier for MARC-HI EHRSv3"/>
      <add name="MB_PHN" oid="2.16.840.1.113883.4.12" desc="Manitoba PHN">
        <attribute name="AssigningAuthorityName" value="ca-mbPHN"/>
        <attribute name="OIDType" value="ISO"/>
      </add>
      <add name="PE_PHN" oid="2.16.840.1.113883.4.13" desc="PEI PHN"/>
      <add name="ON_PHN" oid="2.16.840.1.113883.4.59" desc="ca-onPHN">
        <attribute name="AssigningAuthorityName" value="ca-onPHN"/>
        <attribute name="OIDType" value="ISO"/>
      </add>
      <add name="REG_EVT" oid="1.3.6.1.4.1.33349.3.1.2.2.0.4" desc="Client Registry Registration Event Identifiers"/>
      <add name="CR_CID" oid="1.3.6.1.4.1.33349.3.1.2.2.0.0" desc="Client Registry client internally assigned identifier">
        <attribute name="AssigningAuthorityName" value="MOH_CAAT_CR"/>
        <attribute name="OIDType" value="ISO"/>
        <attribute name="CustodialDeviceId" value="1.3.6.1.4.1.33349.3.1.1.2"/>
        <attribute name="CustodialDeviceName" value="MARC-W3-1"/>
        <attribute name="CustodialOrgName" value="Mohawk College of Applied Arts and Technology"/>
      </add>
      <add name="CR_CID_VRSN" oid="1.3.6.1.4.1.33349.3.1.2.2.0.2" desc="Client Registry client internally assigned version identifier"/>
      <add name="CR_PID" oid="1.3.6.1.4.1.33349.3.1.2.2.0.1" desc="Client Registry provider internally assigned identifiers"/>
      <add name="CR_LID" oid="1.3.6.1.4.1.33349.3.1.2.2.0.3" desc="Client Registry location internally assigned identifiers"/>
      <add name="EVT_ID" oid="1.3.6.1.4.1.33349.3.1.2.2.0.6" desc="Client Registry event identifiers"/>
      <add name="CR_REG_VRSN_ID" oid="1.3.6.1.4.1.33349.3.1.2.2.0.5" desc="Registration event version identifier"/>
      <add name="CR_MSGID" oid="1.3.6.1.4.1.33349.3.1.2.2.0.8" desc="Message identifiers root when not in token"/>
      <add name="DEV_CRID" oid="1.3.6.1.4.1.33349.3.1.2.2.0.7" desc="Device identifier"/>
      <add name="CR_PRID" oid="1.3.6.1.4.1.33349.3.1.2.2.0.9" desc="Personal Relationship identifiers"/>
      <add name="SNOMEDCT" ref="http://snomed.info" oid="2.16.840.1.113883.6.96" desc="SNOMED Clinical Terms">
        <attribute name="HL70396Name" value="SNM"/>
      </add>
      <add name="UCUM" ref="http://hl7.org/fhir/sid/ucum" oid="2.16.840.1.113883.6.8" desc="Uniform Codes for Units of Measure"/>
      <add name="ELB_HIN" oid="1.3.6.1.4.1.33349.3.1.3.12" desc="Government of Elbonia Health Insurance Number">
        <attribute name="AssigningAuthorityName" value="GOVT_ELB_HIN"/>
        <attribute name="OIDType" value="ISO"/>
      </add>
      <add name="GHHS_ID" oid="1.2.840.114350.1.13.99998.8734" desc="Good Health Hospital Assigned ID">
        <attribute name="AssigningAuthorityName" value="GHHS"/>
        <attribute name="OIDType" value="ISO"/>
      </add>
      <add name="MESA_TEST_DOMAIN" oid="1.2.3.4.5.1000" desc="MESA Test Harness Domain">
        <attribute name="AssigningAuthorityName" value="MESA"/>
        <attribute name="OIDType" value="ISO"/>
      </add>
      <add name="MESA_TEST_DOMAIN2" oid="1.2.3.4.5.2000" desc="MESA Test Harness Domain 2">
        <attribute name="AssigningAuthorityName" value="MESA2"/>
        <attribute name="OIDType" value="ISO"/>
      </add>
      <add name="MS_SURF_IDT_MOH_CAAT" oid="1.3.6.1.4.1.33349.3.1.2.1.0.1" desc="Microsoft Surface Identity Tags">
        <attribute name="AssigningAuthorityName" value="MOH_CAAT_MARC_HI"/>
        <attribute name="OIDType" value="ISO"/>
      </add>

      <!-- Fall 2012 Projects -->
      <add name="NSERC_OSCAR_A" oid="1.3.6.1.4.1.33349.3.1.3.201203.0.0" desc="NSERC - Oscar Instance A">
        <attribute name="AssigningAuthorityName" value="NSERC_OSCAR_A"/>
        <attribute name="OIDType" value="ISO"/>
        <attribute name="AssigningDevFacility" value="NSERC_OSCAR_A|MOH_CAAT"/>
      </add>

      <add name="PCS_OSCAR_A" oid="1.3.6.1.4.1.33349.3.1.3.201203.1.0" desc="Patient Care Solutions - Oscar Instance A">
        <attribute name="AssigningAuthorityName" value="PCS_OSCAR_A"/>
        <attribute name="OIDType" value="ISO"/>
        <attribute name="AssigningDevFacility" value="PCS_OSCAR_A|MOH_CAAT"/>
      </add>
      <add name="PCS_OSCAR_B" oid="1.3.6.1.4.1.33349.3.1.3.201203.1.1" desc="Patient Care Solutions - Oscar Instance B">
        <attribute name="AssigningAuthorityName" value="PCS_OSCAR_B"/>
        <attribute name="OIDType" value="ISO"/>
        <attribute name="AssigningDevFacility" value="PCS_OSCAR_B|MOH_CAAT"/>
      </add>
      <add name="MiH_OSCAR_A" oid="1.3.6.1.4.1.33349.3.1.3.201203.2.0" desc="MiHealth - Oscar Instance A">
        <attribute name="AssigningAuthorityName" value="MiH_OSCAR_A"/>
        <attribute name="OIDType" value="ISO"/>
        <attribute name="AssigningDevFacility" value="MiH_OSCAR_A|MOH_CAAT"/>
      </add>
      <add name="MiH_OSCAR_B" oid="1.3.6.1.4.1.33349.3.1.3.201203.2.1" desc="MiHealth - Oscar Instance B">
        <attribute name="AssigningAuthorityName" value="MiH_OSCAR_B"/>
        <attribute name="OIDType" value="ISO"/>
        <attribute name="AssigningDevFacility" value="MiH_OSCAR_B|MOH_CAAT"/>
      </add>
      <add name="RTMS_DIASHARE_A" oid="1.3.6.1.4.1.33349.3.1.3.201203.3" desc="RTMS Diashare A">
        <attribute name="AssigningAuthorityName" value="RTMS_DIASHARE_A"/>
        <attribute name="OIDType" value="ISO"/>
        <attribute name="AssigningDevFacility" value="RTMS_DIASHARE_A|MOH_CAAT"/>
      </add>


    </registeredOids>
    <serviceAssemblies>
      <add assembly="MARC.HI.EHRS.SVC.Core.dll"/>
      <add assembly="MARC.HI.EHRS.SVC.Messaging.Persistence.Data.dll"/>
      <add assembly="MARC.HI.EHRS.CR.Core.dll"/>
      <add assembly="MARC.HI.EHRS.CR.Persistence.Data.dll"/>
      <add assembly="MARC.HI.EHRS.CR.Notification.PixPdq.dll"/>
      <add assembly=".\MARC.HI.EHRS.SVC.Auditing.Atna.dll"/>
      <add assembly=".\MARC.HI.EHRS.SVC.Localization.dll"/>
    </serviceAssemblies>
    <serviceProviders>
      <add type="MARC.HI.EHRS.SVC.Auditing.Atna.AtnaAuditService, MARC.HI.EHRS.SVC.Auditing.Atna, Version=1.0.0.0"/>
      <add type="MARC.HI.EHRS.SVC.Localization.XmlLocalizationService, MARC.HI.EHRS.SVC.Localization, Version=1.0.0.0"/>

      <add type="MARC.HI.EHRS.CR.Persistence.Data.DatabasePersistenceService, MARC.HI.EHRS.CR.Persistence.Data, Version=1.0.0.0"/>
      <!--<add type="MARC.HI.EHRS.CR.Persistence.Data.DatabaseHealthcareWorkerIdentityService, MARC.HI.EHRS.CR.Persistence.Data, Version=1.0.0.0"/>-->
      <add type="MARC.HI.EHRS.CR.Notification.PixPdq.PixNotifier, MARC.HI.EHRS.CR.Notification.PixPdq, Version=1.0.0.0"/>
      <add type="MARC.HI.EHRS.CR.Core.ClientRegistryConfigurationProvider, MARC.HI.EHRS.CR.Core, Version=1.0.0.0"/>
    </serviceProviders>
  </marc.hi.ehrs.svc.core>
  <marc.hi.ehrs.cr.persistence.data>
    <validation allowDuplicates="false" personMustExist="false" minPersonNameMatch="1.0"/>
    <nameMatching defaultMatchStr="Strong">
      <algorithm name="Soundex"/>
      <algorithm name="Variant"/>
      <algorithm name="Exact"/>
    </nameMatching>
    <connectionManager connection="PSQL" readOnlyConnection="CLUSTER">
    </connectionManager>
  </marc.hi.ehrs.cr.persistence.data>
  <marc.hi.ehrs.cr.notification.pixpdq configSource="notify.config"/>
  <marc.everest.connectors.wcf
    formatter="MARC.Everest.Formatters.XML.ITS1.XmlIts1Formatter, MARC.Everest.Formatters.XML.ITS1, Version=1.2.0.0"
    aide="MARC.Everest.Formatters.XML.Datatypes.R1.DatatypeFormatter, MARC.Everest.Formatters.XML.Datatypes.R1, Version=1.2.0.0"
    >
    <action type="MARC.Everest.RMIM.UV.NE2008.Interactions.PRPA_IN201301UV02" action="urn:hl7-org:v3:PRPA_IN201301UV02"/>
    <action type="MARC.Everest.RMIM.UV.NE2008.Interactions.PRPA_IN201302UV02" action="urn:hl7-org:v3:PRPA_IN201301UV02"/>
    <action type="MARC.Everest.RMIM.UV.NE2008.Interactions.PRPA_IN201304UV02" action="urn:hl7-org:v3:PRPA_IN201304UV02"/>
  </marc.everest.connectors.wcf>

  <startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup></configuration>
